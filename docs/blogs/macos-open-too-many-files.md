### MacOS 在执行脚本时遇到 open too many files 解决办法

#### 1. 列出打开文件数量所有进程
```
lsof  -n | awk '{print $2}' | sort | uniq -c | sort -nr | more
```
执行结果如下：
```
files pid
10931 89108
1425 42664
1134 8111
1134 11673
1128 10687
1103 489
...
```
#### 2. 找到打开最多的进程 pid

* 比如上述的 89108 打开了 10931 个文件
```
ps -ef | grep 89108
```

#### 3. 杀掉这个进程
```
kill 89108 -9
```